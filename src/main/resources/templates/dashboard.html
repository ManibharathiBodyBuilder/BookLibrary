<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    margin: 0;
    padding: 20px;
    background: #f5f6fa;
    font-family: Arial, sans-serif;
    opacity: 0;
    animation: fadeIn 0.6s ease-in-out forwards;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
}

.dashboard {
    display: grid;
    grid-template-columns: 250px 1fr 1fr;
    gap: 20px;
}

.tile {
    background: white;
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    transition: 0.3s ease;
}

.tile:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.tile-title {
    font-size: 15px;
    color: #666;
}

.tile-value {
    font-size: 40px;
    font-weight: bold;
    margin-top: 10px;
}

.chart-card {
    background: white;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.06);
    transition: 0.3s ease-in-out;
}

.chart-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.15);
}

.full-width {
    grid-column: span 3;
}

table {
    width: 100%;
    border-collapse: collapse;
}

table th, table td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #eee;
}
#donutChart {
    max-height: 500px !important;
}

</style>
</head>

<body>
<h1 class="text-left mb-10">ðŸ“š  Over All Books Information</h1>
<div class="dashboard">

    <!-- LEFT SUMMARY BOXES -->
    <div>
        <div class="tile">
            <div class="tile-title">Total Books</div>
            <div class="tile-value" id="totalBooks" th:text="${totalBooks}">0</div>
        </div>

        <div class="tile">
            <div class="tile-title">Total Categories</div>
            <div class="tile-value" id="totalCategories" th:text="${totalCategories}">0</div>
        </div>

        <div class="tile">
            <div class="tile-title">Sentiment (Demo)</div>
            <div class="tile-value" id="sentiment">68</div>
        </div>
    </div>

    <!-- LINE CHART -->
    <div class="chart-card">
        <canvas id="lineChart"></canvas>
    </div>

    <!-- BAR CHART -->
    <div class="chart-card">
        <canvas id="barChart"></canvas>
    </div>

    <!-- PIE + DONUT -->
    <div class="chart-card">pieChart<canvas id="pieChart"></canvas></div>
    <div class="chart-card">donutChart<canvas id="donutChart"></canvas></div>

    <!-- Horizontal -->
    <div class="chart-card">
        <h3>Top Categories</h3>
        <canvas id="horizontalChart"></canvas>
    </div>

    <!-- CATEGORY TABLE -->
    <div class="chart-card full-width" style="height:auto;">
        <h3>Books by Category</h3>

        <table>
            <thead>
            <tr><th>Category</th><th>Total Books</th></tr>
            </thead>

            <tbody>
            <tr th:each="i, iter : ${categoryNames}">
                <td th:text="${categoryNames[iter.index]}"></td>
                <td th:text="${categoryCounts[iter.index]}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<script th:inline="javascript">
    const categoryLabels = /*[[${categoryNames}]]*/ [];
    const categoryCounts = /*[[${categoryCounts}]]*/ [];
</script>

<script>
/* ---------------- LINE CHART ---------------- */
const ctxLine = document.getElementById("lineChart").getContext("2d");
const lineGrad = ctxLine.createLinearGradient(0, 0, 0, 300);
lineGrad.addColorStop(0, "#4f46e5");
lineGrad.addColorStop(1, "#818cf8");

new Chart(ctxLine, {
    type: "line",
    data: {
        labels: ["Mon", "Tue", "Wed", "Thu", "Fri"],
        datasets: [{
            label: "Trend",
            data: [5, 12, 9, 15, 22],
            borderColor: "#4f46e5",
            backgroundColor: lineGrad,
            borderWidth: 2,
            tension: 0.4
        }]
    }
});

/* ---------------- BAR CHART ---------------- */
const ctxBar = document.getElementById("barChart").getContext("2d");
const barColors = categoryLabels.map((_, i) => {
    const c = ["#4f46e5", "#22c55e", "#eab308", "#ef4444", "#3b82f6",
               "#a855f7", "#14b8a6", "#f97316", "#ec4899", "#6366f1"];
    return c[i % c.length];
});

new Chart(ctxBar, {
    type: "bar",
    data: {
        labels: categoryLabels,
        datasets: [{
            data: categoryCounts,
            backgroundColor: barColors,
            borderWidth: 0
        }]
    },
    options: { plugins: { legend: { display: false } } }
});

/* ---------------- PIE ---------------- */
const ctxPie = document.getElementById("pieChart").getContext("2d");

new Chart(ctxPie, {
    type: "pie",
    data: {
        labels: categoryLabels,
        datasets: [{
            data: categoryCounts,
            backgroundColor: barColors
        }]
    }
});

/* ---------------- DONUT ---------------- */
const ctxDonut = document.getElementById("donutChart").getContext("2d");

new Chart(ctxDonut, {
    type: "doughnut",
    data: {
        labels: categoryLabels,
        datasets: [{
            data: categoryCounts,
            backgroundColor: barColors
        }]
    },
    options: { cutout: "60%" }
});

/* ---------------- HORIZONTAL BAR ---------------- */
const ctxH = document.getElementById("horizontalChart").getContext("2d");

new Chart(ctxH, {
    type: "bar",
    data: {
        labels: categoryLabels,
        datasets: [{
            data: categoryCounts,
            backgroundColor: barColors,
            borderRadius: 12,
            barThickness: 18
        }]
    },
    options: {
        indexAxis: "y",
        plugins: { legend: { display: false } }
    }
});
</script>
<hr class="footer-line">

<div class="row align-items-center mt-2">
    <div class="col-md-8 col-lg-8">
        <p class="text-center text-md-start mb-0">
            Â© 2025 <strong>BookLibrary Project</strong> | All Rights Reserved
        </p>
    </div>

    <div class="col-md-4 col-lg-4 text-center text-md-end">
        <a href="http://www.facebook.com/login/" class="text-dark me-3"><i
            class="fab fa-facebook fa-lg"></i></a>
        <a href="http://www.instagram.com/accounts/login/" class="text-dark me-3"><i
            class="fab fa-instagram fa-lg"></i></a>
        <a href="http://github.com/login" class="text-dark me-3"><i
            class="fab fa-github fa-lg"></i></a>
        <a href="http://www.linkedin.com/login" class="text-dark"><i
            class="fab fa-linkedin fa-lg"></i></a>
    </div>
</div>



		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
			crossorigin="anonymous"></script>


		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
			integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
			crossorigin="anonymous"></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
			integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
			crossorigin="anonymous"></script>


</body>
</html>
