<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">
<head>
<title>Book List</title>
<style>

/* ðŸ“˜ Professional Image Style */
.card-img-top {
	width: 100%;
	height: 200px; /* Perfect height */
	object-fit: contain; /* Shows full PDF image neatly */
	padding: 15px 10px; /* Balanced padding */
	background: #ffffff;
	border-bottom: 1px solid #eee;
}

/* ðŸ“— Card Box Style */
.card {
	border-radius: 14px;
	transition: 0.25s ease;
	border: none;
	box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
}

.card:hover {
	transform: translateY(-6px);
	box-shadow: 0px 8px 25px rgba(0, 0, 0, 0.2);
}

/* ðŸ“™ Book Title Style */
.card-title {
	font-size: 14px;
	font-weight: 600;
	margin-top: 10px;
	min-height: 40px; /* Keeps all cards same height */
	line-height: 18px;
}

/* ðŸ“• Icon alignment */
.card .fa-solid {
	margin: 0 6px;
	cursor: pointer;
}

/* ðŸ“’ Card container spacing */
.col-md-3 {
	display: flex;
	justify-content: center;
}

html, body {
    overflow-x: hidden !important;
}

.row {
    margin-left: -15px;
    margin-right: -15px;
}
.footer-row {
    margin: 0 !important; 
    padding-top: 5px !important; /* small spacing */
}
.footer-line {
    border: none !important;
    height: 4px !important;
    background-color: #8b5e34 !important; /* coffee */
    opacity: 1 !important;
    margin-bottom: 0 !important;
}








</style>


<!-- <link rel="shortcut icon" type="image/jpg" href="image/books.jpg" /> -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" th:src="@{/js/logout.js}"></script>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">

<script src="http://kit.fontawesome.com/0faddc1af8.js"
	crossorigin="anonymous"></script>
</head>
<body>

	<nav class="navbar navbar-expand-lg navbar-light bg-dark">
		<div class="container-fluid">
			<a class="navbar-brand text-white" href="#"><strong>BOOK
					STORE</strong></a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-4 mb-lg-0">
					<li class="nav-item"><a class="nav-link active text-white"
						aria-current="page" href="testing"><strong>HOME</strong></a></li>
					<li class="nav-item"><a class="nav-link text-white"
						href="available_books"><strong>AVAILABLE BOOK</strong></a></li>
					<li class="nav-item"><a class="nav-link text-white"
						href="my_book"><strong>MY BOOK</strong></a></li>
					<li class="nav-item"><a class="nav-link text-white"
						href="dashboard"><strong>DASHBOARD</strong></a></li>
					<li class="nav-item"><a class="nav-link text-white"
						href="history"><strong>HISTROY</strong></a></li>
				</ul>


				<form class="row g-4 mb-4 mb-lg-0" th:action="@{/search}"
					method="get">
					<div class="col-md-6">
						<input type="text" class="form-control" name="bookName"
							placeholder="Book Name">
					</div>
					<div class="col-md-4">
						<button class="btn btn-outline-success" type="submit">
							<strong>Search</strong>
						</button>
					</div>
				</form>


				<a class="nav-link text-white" href="book_register"><strong>NEW
						BOOK REGISTER</strong></a> <input type="submit" onClick="myFunction()"
					value="logout" class="btn btn-primary btn-lg" />
			</div>
		</div>
	</nav>
	<div class="container my-5 col">


		<div th:if="${message}"
			style="color: red; font-weight: bold; margin-top: 10px;">
			<p th:text="${message}"></p>

		</div>
		<h1 class="text-left mb-5">ðŸ“š Books List</h1>
		<div class="row">
			<div class="col-md-3 col-sm-6 mb-4" th:each="b : ${books}">
				<div class="card shadow-sm  text-center">

					<img th:src="@{/image/pdf.jpg}" class="card-img-top"
						style="height: 250px; object-fit: cover;">

					<div class="card-body">

						<!-- Book Name -->
						<h5 th:text="${b.bookName}" class="card-title"></h5>

						<!-- ACTION ICONS -->
						<div class="d-flex justify-content-center">


							<!-- ADD TO MY BOOKS -->
							<a th:href="@{/mylist/{id}(id=${b.bookId})}" class="mx-2"
								title="Add to My Books"> <i class="fa-solid fa-bookmark"
								style="font-size: 22px; color: #ff9800;"></i>
							</a>

							<!-- VIEW (Open Online PDF) -->
							<a th:href="@{/readbookpage/{id}(id=${b.bookId})}" class="mx-2"
								title="Read Book Online" target="_blank"> <i class="fa-solid fa-eye"
								style="font-size: 22px; color: #007bff;"></i>
							</a>

							<!-- DOWNLOAD / PAYMENT -->
							<a th:href="@{/payment/{id}(id=${b.bookId})}" class="mx-2"
								title="Pay & Download PDF" target="_blank"> <i class="fa-solid fa-download"
								style="font-size: 22px; color: green;"></i>
								
							</a> <span sec:authorize="hasRole('ADMIN')"> <!-- EDIT --> <a
								th:href="@{/editbook/{BookId}(BookId=${b.bookId})}" class="mx-2"
								title="Edit Book Details" target="_blank"> <i
									class="fa-solid fa-pen-to-square"
									style="font-size: 22px; color: darkblue;"></i>
							</a> <!-- DELETE --> <a
								th:href="@{/deletebook/{BookId}(BookId=${b.bookId})}"
								class="mx-2" title="Delete Book" target="_blank"> <i
									class="fa-solid fa-trash" style="font-size: 22px; color: red;"></i>
							</a>

							</span>



						</div>

					</div>

				</div>
			</div>
		</div>
		<!-- <table class="table table-striped">
			<thead>
				<tr class="table-dark">
					<th scope="col">BookId</th>
					<th scope="col">BookName</th>
					<th scope="col">Action</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="b : ${books}">
					<td th:text="${b.bookId}"></td>
					<td th:text="${b.bookName}"></td>
					<td><a class="btn btn-success btn-sm"
						th:href="@{/mylist/{BookId}(BookId=${b.bookId})}"> Add to
							MyBook </a> <a style="font-size: 27px; color: darkblue"
						th:href="@{/editbook/{BookId}(BookId=${b.bookId})}"> <i
							class="fa-solid fa-pen-to-square ms-3"></i>
					</a> <a style="font-size: 27px; color: red"
						th:href="@{/deletebook/{BookId}(BookId=${b.bookId})}"> <i
							class="fa-solid fa-trash ms-3"></i>
					</a> <a th:href="@{/readbookpage/{id}(id=${b.bookId})}" target="_blank"
						title="Read Book Online"> <i
							class="fa-solid fa-book-open-reader ms-3"
							style="color: #007bff; font-size: 20px;"></i>
					</a> <a th:href="@{/payment/{id}(id=${b.bookId})}"
						title="Pay & Download"> <i class="fas fa-download ms-3"
							style="color: green; font-size: 20px;"></i>
					</a></td>
				</tr>
			</tbody>
		</table> -->
	</div>
	<!-- âœ… Page Count Info -->
	<div class="d-flex justify-content-between align-items-center mt-3">
		<div>
			<strong
				th:text="'Showing ' 
        + (${startCount != null ? startCount : 0}) 
        + ' â€“ ' 
        + (${endCount != null ? endCount : 0}) 
        + ' of ' 
        + (${totalBooks != null ? totalBooks : 0}) 
        + ' Books'"></strong>
		</div>

		<div>
			<strong> <span
				th:text="'Page ' 
            + ((${currentPage} != null ? ${currentPage} + 1 : 1)) 
            + ' of ' 
            + (${totalPages != null ? totalPages : 1})"></span>
			</strong>
		</div>
	</div>


	<!-- âœ… Pagination Buttons -->
	<div class="d-flex justify-content-center mt-3">
		<strong>
			<nav>
				<ul class="pagination">
					<li class="page-item"
						th:if="${currentPage != null and currentPage > 0}"><a
						class="page-link"
						th:href="@{/available_books(page=${currentPage - 1})}">Previous</a>
					</li>

					<li class="page-item disabled"><a class="page-link"
						th:text="${currentPage != null ? currentPage + 1 : 1}"></a></li>

					<li class="page-item"
						th:if="${currentPage != null and totalPages != null and currentPage + 1 < totalPages}">
						<a class="page-link"
						th:href="@{/available_books(page=${currentPage + 1})}">Next</a>
					</li>

				</ul>
			</nav>
		</strong>
	</div>


<hr class="footer-line">

<div class="row align-items-center mt-2">
    <div class="col-md-8 col-lg-8">
        <p class="text-center text-md-start mb-0">
            Â© 2025 <strong>BookLibrary Project</strong> | All Rights Reserved
        </p>
    </div>

    <div class="col-md-4 col-lg-4 text-center text-md-end">
        <a href="https://www.facebook.com/login/" class="text-dark me-3"><i
            class="fab fa-facebook fa-lg"></i></a>
        <a href="https://www.instagram.com/accounts/login/" class="text-dark me-3"><i
            class="fab fa-instagram fa-lg"></i></a>
        <a href="https://github.com/login" class="text-dark me-3"><i
            class="fab fa-github fa-lg"></i></a>
        <a href="https://www.linkedin.com/login" class="text-dark"><i
            class="fab fa-linkedin fa-lg"></i></a>
    </div>
</div>



		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
			crossorigin="anonymous"></script>


		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
			integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
			crossorigin="anonymous"></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
			integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
			crossorigin="anonymous"></script>
</body>
</html>
