<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">
<head>
<title>Book History</title>
<link rel="shortcut icon" type="image/jpg" href="image/books.jpg" />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" th:src="@{/js/logout.js}"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous">

<script src="http://kit.fontawesome.com/0faddc1af8.js" crossorigin="anonymous"></script>

<style>
.container-box {
  background-color: #e8ffe8;
  border: 2px solid black;
  border-radius: 15px;
}
</style>

</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light bg-dark">
	<div class="container-fluid">

		<a class="navbar-brand text-white" href="#"><strong>BOOK STORE</strong></a>

		<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">

			<ul class="navbar-nav me-auto mb-2 mb-lg-0">

				<li class="nav-item">
					<a class="nav-link text-white" href="testing"><strong>HOME</strong></a>
				</li>

				<li class="nav-item">
					<a class="nav-link text-white" href="available_books"><strong>AVAILABLE BOOKS</strong></a>
				</li>

				<li class="nav-item">
					<a class="nav-link text-white" href="my_book"><strong>MY BOOKS</strong></a>
				</li>
				
				<li class="nav-item"><a class="nav-link text-white"
						href="dashboard"><strong>DASHBOARD</strong></a></li>

                
				<li class="nav-item">
					<a class="nav-link text-white" href="history"><strong>HISTORY</strong></a>
				</li>

			</ul>

			<a class="nav-link text-white" href="book_register"><strong>NEW BOOK REGISTER</strong></a>

			<input type="submit" onClick="myFunction()" value="Logout"
			       class="btn btn-primary btn-lg ms-3"/>

		</div>
	</div>
</nav>

<!-- MAIN HISTORY BOX -->
<div class="container my-5 p-5 container-box">
	
<h2 class="text-center mb-4" 
    style="font-size:36px; position:relative; padding-right:80px;">

    <strong>Your Activity History</strong>

    <!-- TOTAL COUNT -->
    <span style="position:absolute; right:60px; top:8px; font-size:18px; color:#333;">
        Total: <b th:text="${totalCount}"></b>
    </span>

    <!-- DOWNLOAD EXCEL ICON -->
    <a th:href="@{/history/download}"
       title="Download Excel"
       style="position:absolute; right:10px; top:5px; font-size:28px; color:#1a73e8;">
        <i class="fa-solid fa-file-excel"></i>
    </a>
</h2>


	<table class="table table-bordered table-hover">

			<thead class="table-dark">
				<tr>
					<th>User</th>
					<th>Book ID</th>
					<th>Action</th>
					<th>When</th>
				</tr>
			</thead>


			<tbody>
				<tr th:each="h : ${history}">
					<td th:text="${h.userName}"></td>
					<td th:text="${h.bookId}"></td>
					<td th:utext="${h.action}"></td>
					<td th:text="${#temporals.format(h.actionTime, 'dd-MM-yyyy HH:mm')}"></td>

				</tr>
			</tbody>


		</table>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		crossorigin="anonymous"></script>

</body>
</html>
